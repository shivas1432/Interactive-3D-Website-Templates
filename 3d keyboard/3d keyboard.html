<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Keypad</title>
    <style>
        @import url('https://unpkg.com/normalize.css');

        [data-key] {
            display: none;
            position: absolute;
            inset: 0;
            place-items: center;
        }

        [data-key] svg {
            width: 50%;
        }

        img {
            pointer-events: none;
        }

        [data-platform='gemini'] #one {
            img {
                --brightness: 1.4;
                --saturate: 0.4;
                --hue: 330;
            }
        }
        [data-platform='gemini'] #one .key__text {
            color: hsl(214, 81%, 100%);
        }

        [data-platform='claude'] #one {
            img {
                --brightness: 0.6;
                --saturate: 0;
            }
        }
        [data-platform='claude'] #one .key__text {
            color: #d97757;
        }

        [data-platform='perplexity'] #one {
            img {
                --hue: 280;
                --brightness: 0.8;
                --saturate: 1.2;
            }
        }
        [data-platform='perplexity'] #one .key__text {
            color: #fff;
        }

        [data-platform='macos'] #one .key__text {
            color: #fff;
            font-size: 22cqi;
        }
        [data-platform='macos'] #one img {
            --saturate: 0;
            --brightness: 0.6;
        }

        [data-platform='macos'] [data-key='macos'],
        [data-platform='perplexity'] [data-key='perplexity'],
        [data-platform='claude'] [data-key='claude'],
        [data-platform='gemini'] [data-key='gemini'] {
            display: grid;
        }

        :root {
            --travel: 20;
            --font-size-min: 16;
            --font-size-max: 20;
            --font-ratio-min: 1.2;
            --font-ratio-max: 1.33;
            --font-width-min: 375;
            --font-width-max: 1500;
        }

        html {
            color-scheme: light dark;
        }

        [data-theme='light'] {
            color-scheme: light only;
        }

        [data-theme='dark'] {
            color-scheme: dark only;
        }

        *,
        *:after,
        *:before {
            box-sizing: border-box;
        }

        body {
            background: light-dark(#fff, #000);
            display: grid;
            place-items: center;
            min-height: 100vh;
            overflow: hidden;
            font-family: 'SF Pro Text', 'SF Pro Icons', 'AOS Icons', 'Helvetica Neue',
                Helvetica, Arial, sans-serif, system-ui;
            margin: 0;
            perspective: 2000px;
        }

        body::before {
            --size: 45px;
            --line: color-mix(in hsl, canvasText, transparent 80%);
            content: '';
            height: 100vh;
            width: 100vw;
            position: fixed;
            background: linear-gradient(
                    90deg,
                    var(--line) 1px,
                    transparent 1px var(--size)
                )
                calc(var(--size) * 0.36) 50% / var(--size) var(--size),
                linear-gradient(var(--line) 1px, transparent 1px var(--size)) 0%
                    calc(var(--size) * 0.32) / var(--size) var(--size);
            mask: linear-gradient(-20deg, transparent 50%, white);
            top: 0;
            transform-style: flat;
            pointer-events: none;
            z-index: -1;
        }

        .keypad {
            position: relative;
            aspect-ratio: 400 / 310;
            display: flex;
            place-items: center;
            width: clamp(280px, 45vw, 500px);
            -webkit-tap-highlight-color: #0000;
            transition-property: translate, transform;
            transition-duration: 0.1s;
            transition-timing-function: ease-out;
            transform-style: preserve-3d;
            scale: 1;
            perspective: 1000px;
            transform-origin: center center;
        }

        .key {
            transform-style: preserve-3d;
            border: 0;
            background: #0000;
            padding: 0;
            cursor: pointer;
            outline: none;
        }

        .key[data-pressed='true'],
        .key:active {
            .key__content {
                translate: 0 calc(var(--travel) * 1%);
            }
        }

        #one {
            left: 13.5%;
            bottom: 57.2%;
        }

        #two {
            left: 25.8%;
            bottom: 48.5%;
        }

        #three {
            left: 38%;
            bottom: 39.2%;
        }

        #four {
            left: 50.4%;
            bottom: 30.2%;
        }

        #five {
            left: 62.7%;
            bottom: 21%;
        }

        #five .key__text {
            font-size: 34cqi;
            filter: grayscale(1);
        }

        .key__content {
            width: 100%;
            display: inline-block;
            height: 100%;
            transition: translate 0.12s ease-out;
            container-type: inline-size;
        }

        .key__text {
            width: 52%;
            height: 62%;
            position: absolute;
            font-size: 18cqi;
            z-index: 21;
            top: 5%;
            left: 0;
            mix-blend-mode: normal;
            color: hsl(0 0% 4%);
            translate: 45% -16%;
            transform: rotateX(36deg) rotateY(45deg) rotateX(-90deg) rotate(0deg);
            display: grid;
            place-items: center;
        }

        .keypad__single {
            position: absolute;
            width: 21%;
            left: 54%;
            bottom: 36%;
            height: 24%;
            clip-path: polygon(
                0 0,
                54% 0,
                89% 24%,
                100% 70%,
                54% 100%,
                46% 100%,
                0 69%,
                12% 23%,
                47% 0%
            );
            mask: url(https://assets.codepen.io/605876/keypad-single.png?format=auto&quality=86)
                50% 50% / 100% 100%;
        }

        .keypad__single img {
            --brightness: 2;
            --saturate: 0;
            top: 0;
            opacity: 1;
            width: 96%;
            position: absolute;
            left: 50%;
            translate: -50% 1%;
        }

        .key__mask {
            width: 100%;
            height: 100%;
            display: inline-block;
        }

        .key img {
            filter: hue-rotate(calc(var(--hue, 0) * 1deg))
                saturate(var(--saturate, 1)) brightness(var(--brightness, 1));
        }

        .keypad__base {
            position: absolute;
            bottom: 0;
            width: 100%;
        }

        .keypad__base img {
            width: 100%;
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }
    </style>
</head>
<body data-platform="gemini" data-theme="dark">
    <main>
        <div class="keypad">
            <div class="keypad__base">
                <img
                    src="https://assets.codepen.io/605876/ai-base.png?format=auto&quality=86"
                    alt=""
                />
            </div>
            <button id="one" class="key keypad__single">
                <span class="key__mask">
                    <span class="key__content">
                        <span class="key__text">
                            <span data-key="macos">⌘</span>
                            <span data-key="gemini">
                                <svg
                                    role="img"
                                    viewBox="0 0 24 24"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <title>Google Gemini</title>
                                    <path
                                        fill="currentColor"
                                        d="M11.04 19.32Q12 21.51 12 24q0-2.49.93-4.68.96-2.19 2.58-3.81t3.81-2.55Q21.51 12 24 12q-2.49 0-4.68-.93a12.3 12.3 0 0 1-3.81-2.58 12.3 12.3 0 0 1-2.58-3.81Q12 2.49 12 0q0 2.49-.96 4.68-.93 2.19-2.55 3.81a12.3 12.3 0 0 1-3.81 2.58Q2.49 12 0 12q2.49 0 4.68.96 2.19.93 3.81 2.55t2.55 3.81"
                                    />
                                </svg>
                            </span>
                            <span data-key="claude">
                                <svg
                                    role="img"
                                    viewBox="0 0 24 24"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <title>Claude</title>
                                    <path
                                        fill="currentColor"
                                        d="m4.7144 15.9555 4.7174-2.6471.079-.2307-.079-.1275h-.2307l-.7893-.0486-2.6956-.0729-2.3375-.0971-2.2646-.1214-.5707-.1215-.5343-.7042.0546-.3522.4797-.3218.686.0608 1.5179.1032 2.2767.1578 1.6514.0972 2.4468.255h.3886l.0546-.1579-.1336-.0971-.1032-.0972L6.973 9.8356l-2.55-1.6879-1.3356-.9714-.7225-.4918-.3643-.4614-.1578-1.0078.6557-.7225.8803.0607.2246.0607.8925.686 1.9064 1.4754 2.4893 1.8336.3643.3035.1457-.1032.0182-.0728-.164-.2733-1.3539-2.4467-1.445-2.4893-.6435-1.032-.17-.6194c-.0607-.255-.1032-.4674-.1032-.7285L6.287.1335 6.6997 0l.9957.1336.419.3642.6192 1.4147 1.0018 2.2282 1.5543 3.0296.4553.8985.2429.8318.091.255h.1579v-.1457l.1275-1.706.2368-2.0947.2307-2.6957.0789-.7589.3764-.9107.7468-.4918.5828.2793.4797.686-.0668.4433-.2853 1.8517-.5586 2.9021-.3643 1.9429h.2125l.2429-.2429.9835-1.3053 1.6514-2.0643.7286-.8196.85-.9046.5464-.4311h1.0321l.759 1.1293-.34 1.1657-1.0625 1.3478-.8804 1.1414-1.2628 1.7-.7893 1.36.0729.1093.1882-.0183 2.8535-.607 1.5421-.2794 1.8396-.3157.8318.3886.091.3946-.3278.8075-1.967.4857-2.3072.4614-3.4364.8136-.0425.0304.0486.0607 1.5482.1457.6618.0364h1.621l3.0175.2247.7892.522.4736.6376-.079.4857-1.2142.6193-1.6393-.3886-3.825-.9107-1.3113-.3279h-.1822v.1093l1.0929 1.0686 2.0035 1.8092 2.5075 2.3314.1275.5768-.3218.4554-.34-.0486-2.2039-1.6575-.85-.7468-1.9246-1.621h-.1275v.17l.4432.6496 2.3436 3.5214.1214 1.0807-.17.3521-.6071.2125-.6679-.1214-1.3721-1.9246L14.38 17.959l-1.1414-1.9428-.1397.079-.674 7.2552-.3156.3703-.7286.2793-.6071-.4614-.3218-.7468.3218-1.4753.3886-1.9246.3157-1.53.2853-1.9004.17-.6314-.0121-.0425-.1397.0182-1.4328 1.9672-2.1796 2.9446-1.7243 1.8456-.4128.164-.7164-.3704.0667-.6618.4008-.5889 2.386-3.0357 1.4389-1.882.929-1.0868-.0062-.1579h-.0546l-6.3385 4.1164-1.1293.1457-.4857-.4554.0608-.7467.2307-.2429 1.9064-1.3114Z"
                                    />
                                </svg>
                            </span>
                            <span data-key="perplexity">
                                <svg
                                    role="img"
                                    viewBox="0 0 24 24"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <title>Perplexity</title>
                                    <path
                                        fill="currentColor"
                                        d="M22.3977 7.0896h-2.3106V.0676l-7.5094 6.3542V.1577h-1.1554v6.1966L4.4904 0v7.0896H1.6023v10.3976h2.8882V24l6.932-6.3591v6.2005h1.1554v-6.0469l6.9318 6.1807v-6.4879h2.8882V7.0896zm-3.4657-4.531v4.531h-5.355l5.355-4.531zm-13.2862.0676 4.8691 4.4634H5.6458V2.6262zM2.7576 16.332V8.245h7.8476l-6.1149 6.1147v1.9723H2.7576zm2.8882 5.0404v-3.8852h.0001v-2.6488l5.7763-5.7764v7.0111l-5.7764 5.2993zm12.7086.0248-5.7766-5.1509V9.0618l5.7766 5.7766v6.5588zm2.8882-5.0652h-1.733v-1.9723L13.3948 8.245h7.8478v8.087z"
                                    />
                                </svg>
                            </span>
                        </span>
                        <img
                            src="https://assets.codepen.io/605876/keypad-single.png?format=auto&quality=86"
                            alt=""
                        />
                    </span>
                </span>
            </button>
            <button id="two" class="key keypad__single">
                <span class="key__mask">
                    <span class="key__content">
                        <span class="key__text">Tab</span>
                        <img
                            src="https://assets.codepen.io/605876/keypad-single.png?format=auto&quality=86"
                            alt=""
                        />
                    </span>
                </span>
            </button>
            <button id="three" class="key keypad__single">
                <span class="key__mask">
                    <span class="key__content">
                        <span class="key__text">C</span>
                        <img
                            src="https://assets.codepen.io/605876/keypad-single.png?format=auto&quality=86"
                            alt=""
                        />
                    </span>
                </span>
            </button>
            <button id="four" class="key keypad__single">
                <span class="key__mask">
                    <span class="key__content">
                        <span class="key__text">V</span>
                        <img
                            src="https://assets.codepen.io/605876/keypad-single.png?format=auto&quality=86"
                            alt=""
                        />
                    </span>
                </span>
            </button>
            <button id="five" class="key keypad__single">
                <span class="key__mask">
                    <span class="key__content">
                        <span class="key__text">🤷‍♂️</span>
                        <img
                            src="https://assets.codepen.io/605876/keypad-single.png?format=auto&quality=86"
                            alt=""
                        />
                    </span>
                </span>
            </button>
        </div>
    </main>

    <script>
        const config = {
            platform: 'gemini',
            muted: false,
            one: {
                travel: 26,
                key: 'Meta',
                hue: 330,
                saturation: 0.4,
                brightness: 1.4,
                buttonElement: document.querySelector('#one'),
            },
            two: {
                travel: 26,
                key: 'Tab',
                hue: 0,
                saturation: 0,
                brightness: 1.4,
                buttonElement: document.querySelector('#two'),
            },
            three: {
                travel: 18,
                key: 'c',
                hue: 0,
                saturation: 0,
                brightness: 0.4,
                buttonElement: document.querySelector('#three'),
            },
            four: {
                travel: 18,
                key: 'v',
                hue: 0,
                saturation: 0,
                brightness: 0.4,
                buttonElement: document.querySelector('#four'),
            },
            five: {
                travel: 18,
                key: 'Escape',
                hue: 0,
                saturation: 0,
                brightness: 0.4,
                buttonElement: document.querySelector('#five'),
            },
        }

        const clickAudio = new Audio(
            'https://cdn.freesound.org/previews/378/378085_6260145-lq.mp3'
        )
        clickAudio.muted = config.muted

        const ids = ['one', 'two', 'three', 'four', 'five']
        
        // Initialize button styles
        for (const id of ids) {
            config[id].buttonElement.style.setProperty('--travel', config[id].travel)
            config[id].buttonElement.style.setProperty('--saturate', config[id].saturation)
            config[id].buttonElement.style.setProperty('--hue', config[id].hue)
            config[id].buttonElement.style.setProperty('--brightness', config[id].brightness)
            
            config[id].buttonElement.addEventListener('pointerdown', () => {
                if (!config.muted) {
                    clickAudio.currentTime = 0
                    clickAudio.play()
                }
            })
        }

        // Handle keyboard input
        window.addEventListener('keydown', (event) => {
            for (const id of ids) {
                if (event.key === config[id].key) {
                    config[id].buttonElement.dataset.pressed = true
                    if (!config.muted) {
                        clickAudio.currentTime = 0
                        clickAudio.play()
                    }
                }
            }
        })

        window.addEventListener('keyup', (event) => {
            for (const id of ids) {
                if (event.key === config[id].key || event.key === 'Meta') {
                    config[id].buttonElement.dataset.pressed = false
                }
            }
        })

        // Set initial platform
        document.documentElement.dataset.platform = config.platform

        // 3D Mouse Movement Effect
        let isMouseMoving = false
        let mouseTimeout

        function handleMouseMove(event) {
            const keypad = document.querySelector('.keypad')
            const rect = keypad.getBoundingClientRect()
            const centerX = rect.left + rect.width / 2
            const centerY = rect.top + rect.height / 2
            
            const mouseX = event.clientX
            const mouseY = event.clientY
            
            // Calculate rotation based on mouse position relative to center
            const rotateX = ((mouseY - centerY) / window.innerHeight) * -30 // Max 30 degrees
            const rotateY = ((mouseX - centerX) / window.innerWidth) * 30   // Max 30 degrees
            
            // Apply the 3D transformation
            keypad.style.transform = `
                perspective(2000px) 
                rotateX(${rotateX}deg) 
                rotateY(${rotateY}deg)
                translateZ(50px)
            `
            
            isMouseMoving = true
            
            // Clear existing timeout
            clearTimeout(mouseTimeout)
            
            // Set timeout to return to center when mouse stops moving
            mouseTimeout = setTimeout(() => {
                isMouseMoving = false
                keypad.style.transform = `
                    perspective(2000px) 
                    rotateX(0deg) 
                    rotateY(0deg)
                    translateZ(0px)
                `
            }, 2000) // Return to center after 2 seconds of no movement
        }

        // Add mouse move listener to the entire document
        document.addEventListener('mousemove', handleMouseMove)
        
        // Reset on mouse leave
        document.addEventListener('mouseleave', () => {
            const keypad = document.querySelector('.keypad')
            keypad.style.transform = `
                perspective(2000px) 
                rotateX(0deg) 
                rotateY(0deg)
                translateZ(0px)
            `
        })

        // Enhanced button press effect for 3D
        for (const id of ids) {
            const originalPointerDown = config[id].buttonElement.addEventListener
            
            config[id].buttonElement.addEventListener('pointerdown', (e) => {
                if (!config.muted) {
                    clickAudio.currentTime = 0
                    clickAudio.play()
                }
                
                // Add extra 3D effect when pressing
                const keypad = document.querySelector('.keypad')
                const currentTransform = keypad.style.transform
                keypad.style.transform = currentTransform + ' scale(0.98)'
                
                setTimeout(() => {
                    keypad.style.transform = currentTransform
                }, 150)
            })
        }
    </script>
</body>
</html>